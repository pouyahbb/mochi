<div align="center">
  <h1>ğŸ¨ Mochi</h1>
  <p><strong>Transform Wireframes into Beautiful UIs with AI-Powered Design Generation</strong></p>
  
  <p>
    <a href="#features">Features</a> â€¢
    <a href="#getting-started">Getting Started</a> â€¢
    <a href="#tech-stack">Tech Stack</a> â€¢
    <a href="#environment-variables">Environment Variables</a>
  </p>
</div>

---

## âœ¨ Overview

**Mochi** is an AI-powered design tool that transforms simple wireframes into production-ready UI designs in seconds. Built with Next.js, Convex, and Anthropic's Claude AI, Mochi leverages shadcn/ui components and pre-built templates to generate high-quality, consistent designs while reducing AI costs.

### ğŸš€ Key Features

- **ğŸ¯ AI-Powered Design Generation**: Transform wireframes into production-ready HTML with shadcn/ui components
- **ğŸ¨ Style Guide Generator**: Automatically extract colors, typography, and design tokens from inspiration images
- **ğŸ’¬ Interactive Design Chat**: Chat with AI to redesign your UI in real-time with simple text commands
- **ğŸ“„ Workflow Page Generation**: Generate complete workflow pages (dashboards, settings, profiles, data tables)
- **ğŸ–¼ï¸ Infinite Canvas**: Draw wireframes with powerful tools - frames, shapes, arrows, text, and more
- **ğŸ“¤ Export & Deploy**: Export designs as PNG or copy HTML code ready to use
- **ğŸ”„ Undo/Redo**: Full history support with keyboard shortcuts (Ctrl+Z, Ctrl+Shift+Z)
- **ğŸ’³ Credit System**: Simple, predictable pricing with monthly credit allocation

---

## ğŸ› ï¸ Tech Stack

- **Frontend**: Next.js 15, React 19, TypeScript
- **Backend**: Convex (Database & Serverless Functions)
- **AI**: Anthropic Claude (Sonnet 4)
- **Styling**: Tailwind CSS 4, shadcn/ui
- **State Management**: Redux Toolkit
- **Event Processing**: Inngest
- **Billing**: Polar.sh
- **Authentication**: Convex Auth

---

## ğŸ“‹ Prerequisites

Before you begin, ensure you have the following installed:

- **Node.js** 18+ and npm/yarn/pnpm
- **Convex Account** - [Sign up here](https://convex.dev)
- **Anthropic API Key** - [Get one here](https://console.anthropic.com)
- **Polar.sh Account** - For billing integration
- **Inngest Account** - For event processing

---

## ğŸš€ Getting Started

### 1. Clone the Repository

```bash
git clone https://github.com/yourusername/mochi.git
cd mochi
```

### 2. Install Dependencies

```bash
npm install
# or
yarn install
# or
pnpm install
```

### 3. Set Up Convex

```bash
npx convex dev
```

This will:
- Create a new Convex project (if needed)
- Generate the Convex configuration
- Set up the database schema

### 4. Configure Environment Variables

Create a `.env.local` file in the root directory and add the following variables:

```env
# Convex Configuration
CONVEX_DEPLOYMENT=dev:your-deployment-name
NEXT_PUBLIC_CONVEX_URL=https://your-deployment.convex.cloud
CONVEX_SITE_URL=http://localhost:3000

# Anthropic AI
ANTHROPIC_API_KEY=sk-ant-api03-your-api-key

# Polar.sh Billing
POLAR_ACCESS_TOKEN=polar_oat_your-access-token
POLAR_WEBHOOK_SECRET=polar_whs_your-webhook-secret
POLAR_ENV=sandbox
POLAR_STANDARD_PLAN=your-product-id

# Inngest Event Processing
INNGEST_SIGNING_KEY=signkey-prod-your-signing-key
INNGEST_EVENT_KEY=your-event-key
INNGEST_DEV=1

# Application URL (for webhooks)
NEXT_PUBLIC_APP_URL=http://localhost:3000

# OpenAI (optional, if used)
OPENAI_API_KEY=your-openai-key
```

### 5. Run the Development Server

```bash
npm run dev
# or
yarn dev
# or
pnpm dev
```

Open [http://localhost:3000](http://localhost:3000) in your browser.

### 6. Run Inngest Dev Server (in a separate terminal)

```bash
npm run inngest:dev
```

This starts the Inngest dev server for processing webhooks and events.

---

## ğŸ“– How to Use

### Creating Your First Design

1. **Sign Up / Sign In**: Create an account or sign in to your existing account
2. **Create a Project**: Click "New Project" to create a new design project
3. **Upload Inspiration Images**: 
   - Go to the Style Guide page
   - Upload images to your mood board
   - Click "Generate Style Guide" to extract colors and typography
4. **Draw Your Wireframe**:
   - Navigate to the Canvas
   - Use the toolbar to draw frames, shapes, arrows, and text
   - Create a wireframe of your desired UI
5. **Generate Design**:
   - Click "Generate Design" on your frame
   - Watch as AI transforms your wireframe into a production-ready UI
6. **Refine & Export**:
   - Use the Design Chat to make changes
   - Generate workflow pages if needed
   - Export as PNG or copy the HTML code

### Keyboard Shortcuts

- **Ctrl+Z / Cmd+Z**: Undo
- **Ctrl+Shift+Z / Cmd+Shift+Z**: Redo
- **Ctrl+Y / Cmd+Y**: Redo (alternative)
- **Space + Drag**: Pan canvas
- **Mouse Wheel**: Zoom in/out

---

## ğŸ”§ Environment Variables Explained

### Required Variables

| Variable | Description | Where to Get |
|----------|-------------|--------------|
| `CONVEX_DEPLOYMENT` | Your Convex deployment name | Generated by `npx convex dev` |
| `NEXT_PUBLIC_CONVEX_URL` | Your Convex deployment URL | Generated by `npx convex dev` |
| `ANTHROPIC_API_KEY` | Anthropic API key for AI generation | [Anthropic Console](https://console.anthropic.com) |
| `POLAR_ACCESS_TOKEN` | Polar.sh API access token | [Polar.sh Dashboard](https://polar.sh) |
| `POLAR_WEBHOOK_SECRET` | Polar.sh webhook secret | [Polar.sh Dashboard](https://polar.sh) |
| `POLAR_STANDARD_PLAN` | Product ID for standard plan | [Polar.sh Dashboard](https://polar.sh) |
| `INNGEST_SIGNING_KEY` | Inngest signing key | [Inngest Dashboard](https://inngest.com) |
| `INNGEST_EVENT_KEY` | Inngest event key | [Inngest Dashboard](https://inngest.com) |

### Optional Variables

| Variable | Description | Default |
|----------|-------------|---------|
| `POLAR_ENV` | Polar environment (sandbox/production) | `sandbox` |
| `INNGEST_DEV` | Enable Inngest dev mode | `1` |
| `NEXT_PUBLIC_APP_URL` | Your application URL | `http://localhost:3000` |
| `OPENAI_API_KEY` | OpenAI API key (if used) | - |

---

## ğŸ“ Project Structure

```
mochi/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # Next.js app router pages
â”‚   â”‚   â”œâ”€â”€ (protected)/       # Protected routes (dashboard, billing)
â”‚   â”‚   â”œâ”€â”€ (public)/          # Public routes (pricing)
â”‚   â”‚   â”œâ”€â”€ api/               # API routes
â”‚   â”‚   â”‚   â”œâ”€â”€ generate/      # AI generation endpoints
â”‚   â”‚   â”‚   â””â”€â”€ billing/       # Billing webhooks
â”‚   â”‚   â””â”€â”€ auth/              # Authentication pages
â”‚   â”œâ”€â”€ components/            # React components
â”‚   â”‚   â”œâ”€â”€ canvas/            # Canvas components
â”‚   â”‚   â”œâ”€â”€ buttons/           # Button components
â”‚   â”‚   â””â”€â”€ ui/                # shadcn/ui components
â”‚   â”œâ”€â”€ convex/                # Convex backend
â”‚   â”‚   â”œâ”€â”€ subscription.ts    # Subscription management
â”‚   â”‚   â”œâ”€â”€ projects.ts        # Project management
â”‚   â”‚   â””â”€â”€ user.ts            # User management
â”‚   â”œâ”€â”€ hooks/                 # Custom React hooks
â”‚   â”œâ”€â”€ lib/                   # Utility functions
â”‚   â”œâ”€â”€ prompts/               # AI prompts and templates
â”‚   â”‚   â”œâ”€â”€ components.ts      # shadcn/ui component library
â”‚   â”‚   â”œâ”€â”€ templates.ts       # Page templates
â”‚   â”‚   â””â”€â”€ index.ts           # System prompts
â”‚   â”œâ”€â”€ redux/                 # Redux store and slices
â”‚   â””â”€â”€ types/                 # TypeScript types
â”œâ”€â”€ convex/                    # Convex schema and functions
â””â”€â”€ public/                    # Static assets
```

---

## ğŸ¯ Key Features Explained

### AI Design Generation

Mochi uses Anthropic's Claude Sonnet 4 to generate UI designs. The AI is trained to:
- Use shadcn/ui components from a pre-built library
- Follow style guides generated from mood boards
- Maintain design consistency across pages
- Generate accessible, semantic HTML

### Style Guide Generation

Upload inspiration images to generate comprehensive style guides:
- **Color Extraction**: Automatically identifies color palettes
- **Typography Analysis**: Suggests font families, sizes, and weights
- **Design Tokens**: Creates reusable design tokens for consistency

### Credit System

- Each user gets 10 credits per month (with Standard Plan)
- One credit = one AI task (generation, export, etc.)
- Credits refresh monthly
- Simple, predictable pricing

---

## ğŸ” Authentication

Mochi uses Convex Auth with password-based authentication. Users can:
- Sign up with email and password
- Sign in to access their projects
- Manage their account and subscription

---

## ğŸ’³ Billing Integration

Mochi integrates with Polar.sh for subscription management:
- Webhook handling via Inngest
- Automatic credit granting
- Subscription status tracking
- Credit balance management

### Setting Up Polar.sh

1. Create a product in Polar.sh dashboard
2. Set up webhook endpoint: `https://your-domain.com/api/billing/webhook`
3. Configure webhook secret
4. Add product ID to environment variables

---

## ğŸ§ª Development

### Running Tests

```bash
npm run test
```

### Building for Production

```bash
npm run build
npm start
```

### Linting

```bash
npm run lint
```

---

## ğŸ“ API Endpoints

### AI Generation

- `POST /api/generate` - Generate UI from wireframe
- `POST /api/generate/redesign` - Redesign existing UI
- `POST /api/generate/workflow` - Generate workflow pages
- `POST /api/generate/workflow-redesign` - Redesign workflow pages
- `POST /api/generate/style` - Generate style guide

### Billing

- `POST /api/billing/webhook` - Polar.sh webhook handler
- `GET /api/billing/checkout` - Create checkout session

---

## ğŸ¤ Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

---

## ğŸ“„ License

This project is licensed under the MIT License.

---

## ğŸ™ Acknowledgments

- [shadcn/ui](https://ui.shadcn.com) for the amazing component library
- [Convex](https://convex.dev) for the backend infrastructure
- [Anthropic](https://anthropic.com) for Claude AI
- [Next.js](https://nextjs.org) for the framework

---

## ğŸ“ Support

For support, email support@mochi.dev or open an issue in the GitHub repository.

---

<div align="center">
  <p>Made with â¤ï¸ by the Mochi team</p>
  <p>
    <a href="https://github.com/yourusername/mochi">â­ Star us on GitHub</a>
  </p>
</div>
